(window["webpackJsonpjournal-app-client"]=window["webpackJsonpjournal-app-client"]||[]).push([[0],{146:function(e,t,a){},159:function(e,t,a){e.exports=a.p+"static/media/note.6e7be65f.svg"},165:function(e,t,a){e.exports=a(341)},170:function(e,t,a){},173:function(e,t,a){},180:function(e,t,a){},235:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},331:function(e,t,a){},341:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),o=a.n(s),i=(a(170),a(46)),l=(a(57),a(27)),c=a(16),u=a(17),m=a(19),d=a(18),h=a(12),p=a(20),g=(a(129),a(71)),v=(a(173),a(53)),f=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_BASE_URL||"https://journal-app-1.herokuapp.com/api",b="accessToken",E=30,y=140,O=1400,S=4,j=40,N=3,w=15,k=40,C=6,L=20,P=function(e){var t=new Headers({"Content-Type":"application/json"});localStorage.getItem(b)&&t.append("Authorization","Bearer "+localStorage.getItem(b));var a={headers:t};return e=Object.assign({},a,e),fetch(e.url,e).then(function(e){return e.json().then(function(t){return e.ok?t:Promise.reject(t)})})};function M(e,t,a){return P({url:f+"/users/"+e+"/notes?page="+(t=t||0)+"&size="+(a=a||E),method:"GET"})}a(174);var A=a(155),U=(a(42),a(15)),I=(a(76),a(9)),D=(a(178),a(153)),x=(a(130),a(96)),T=(a(180),a(150)),z=a(21),F=["#F44336","#e91e63","#9c27b0","#673ab7","#ff9800","#ff5722","#795548","#607d8b","#3f51b5","#2196F3","#00bcd4","#009688","#2196F3","#32c787","#00BCD4","#ff5652","#ffc107","#ff85af","#FF9800","#39bbb0","#4CAF50","#ffeb3b","#ffc107"];function J(e){e=e.substr(0,6);for(var t=0,a=0;a<e.length;a++)t=31*t+e.charCodeAt(a);var n=Math.abs(t%F.length);return F[n]}a(183);var R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleDelete=a.handleDelete.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleDelete",value:function(e){var t=this;console.log("Delete note : "+e),Object(T.confirmAlert)({title:"Confirmation suppression",message:"Etes vous sure ?",buttons:[{label:"Yes",onClick:function(){(function(e){return P({url:f+"/notes",method:"DELETE",body:JSON.stringify(e)})})(e).then(function(e){t.props.loadNoteListInit()}).catch(function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create note."):l.a.error({message:"Journal App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{label:"No",onClick:function(){}}]})}},{key:"render",value:function(){return r.a.createElement(D.a,{className:"gutter-row",span:12},r.a.createElement("div",{className:"note-content"},r.a.createElement("div",{className:"note-header"},r.a.createElement("div",{className:"note-creator-info"},r.a.createElement(z.b,{className:"creator-link",to:"/users/profile"},r.a.createElement(x.a,{className:"note-creator-avatar",style:{backgroundColor:J(this.props.note.createdBy.name)}},this.props.note.createdBy.name[0].toUpperCase()),r.a.createElement("span",{className:"note-creator-name"},this.props.note.createdBy.name),r.a.createElement("span",{className:"note-creator-username"},"@",this.props.note.createdBy.username),r.a.createElement("span",{className:"note-creation-date"},function(e){var t=new Date(e),a=t.getMonth(),n=t.getFullYear();return t.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a]+" "+n+" - "+t.getHours()+":"+t.getMinutes()}(this.props.note.creationDateTime)))),r.a.createElement("div",{className:"note-title"},this.props.note.title)),r.a.createElement("div",{className:"note-content"},this.props.note.content),r.a.createElement("div",{className:"poll-footer"},r.a.createElement("div",{className:"float-right"},r.a.createElement(z.b,{className:"vote-button",to:{pathname:"/note/edit",state:{noteId:this.props.note.id}}},r.a.createElement(U.a,{type:"primary"},"Edit")),r.a.createElement("span",{className:"separator"},"\u2022"),r.a.createElement(U.a,{type:"danger",onClick:this.handleDelete.bind(this,this.props.note.id)},"Delete")))))}}]),t}(n.Component),B=(a(228),a(154));function _(e){var t=r.a.createElement(I.a,{type:"loading-3-quarters",style:{fontSize:30},spin:!0});return r.a.createElement(B.a,{indicator:t,style:{display:"block",textAlign:"center",marginTop:30}})}a(235);var Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={notes:[],page:0,size:10,totalElements:0,totalPages:0,last:!0,isLoading:!1},a.loadNoteListInit=a.loadNoteListInit.bind(Object(h.a)(a)),a.loadNoteList=a.loadNoteList.bind(Object(h.a)(a)),a.handleLoadMore=a.handleLoadMore.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loadNoteList",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;this.props.username&&"USER_CREATED_NOTES"===this.props.type&&(e=M(this.props.username,a,n)),e&&(this.setState({isLoading:!0}),e.then(function(e){var a=t.state.notes.slice();t.setState({notes:a.concat(e.content),page:e.page,size:e.size,totalElements:e.totalElements,totalPages:e.totalPages,last:e.last,isLoading:!1})}).catch(function(e){t.setState({isLoading:!1})}))}},{key:"loadNoteListInit",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;this.props.username&&"USER_CREATED_NOTES"===this.props.type&&(e=M(this.props.username,a,n)),e&&(this.setState({isLoading:!0}),e.then(function(e){t.state.notes.slice();t.setState({notes:e.content,page:e.page,size:e.size,totalElements:e.totalElements,totalPages:e.totalPages,last:e.last,isLoading:!1})}).catch(function(e){t.setState({isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.loadNoteList()}},{key:"componentDidUpdate",value:function(e){this.props.isAuthenticated!==e.isAuthenticated&&(this.setState({notes:[],page:0,size:10,totalElements:0,totalPages:0,last:!0,isLoading:!1}),this.loadNoteList())}},{key:"handleLoadMore",value:function(){this.loadNoteList(this.state.page+1)}},{key:"render",value:function(){var e=this,t=[];return this.state.notes.forEach(function(a,n){t.push(r.a.createElement(R,{key:a.id,note:a,loadNoteListInit:e.loadNoteListInit}))}),r.a.createElement(A.a,{gutter:16},t,this.state.isLoading||0!==this.state.notes.length?null:r.a.createElement("div",{className:"no-notes-found"},r.a.createElement("span",null)),this.state.isLoading||this.state.last?null:r.a.createElement("div",{className:"load-more-notes"},r.a.createElement(U.a,{type:"dashed",onClick:this.handleLoadMore,disabled:this.state.isLoading},r.a.createElement(I.a,{type:"plus"})," Load more")),this.state.isLoading?r.a.createElement(_,null):null)}}]),t}(n.Component),G=Object(v.g)(Y),W=(a(85),a(32)),q=(a(86),a(33));a(146);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Q=q.a.Item,V=W.a.TextArea,$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).validateTitle=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter a title for your note!"}:e.length>y?{validateStatus:"error",errorMsg:"Note title is too long (Maximum ".concat(y," characters allowed)")}:{validateStatus:"success",errorMsg:null}},a.validateContent=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please fill the body of your note!"}:e.length>O?{validateStatus:"error",errorMsg:"Note body is too long (Maximum ".concat(O," characters allowed)")}:{validateStatus:"success",errorMsg:null}},a.state={title:{text:""},content:{text:""}},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.isFormInvalid=a.isFormInvalid.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return P({url:f+"/notes",method:"POST",body:JSON.stringify(e)})}({title:this.state.title.text,content:this.state.content.text}).then(function(e){t.props.history.push("/")}).catch(function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create note."):l.a.error({message:"Journal App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleChange",value:function(e){var t=e.target.value;"title"===e.target.name?this.setState({title:K({text:t},this.validateTitle(t))}):"content"===e.target.name&&this.setState({content:K({text:t},this.validateContent(t))})}},{key:"isFormInvalid",value:function(){return"success"!==this.state.title.validateStatus||("success"!==this.state.content.validateStatus||void 0)}},{key:"render",value:function(){return r.a.createElement("div",{className:"new-note-container"},r.a.createElement("h1",{className:"page-title"},"Create Note"),r.a.createElement("div",{className:"new-note-content"},r.a.createElement(q.a,{onSubmit:this.handleSubmit,className:"create-note-form"},r.a.createElement(Q,{validateStatus:this.state.title.validateStatus,help:this.state.title.errorMsg,className:"note-form-row"},r.a.createElement(W.a,{placeholder:"Note title ",size:"large",name:"title",value:this.state.title.text,onChange:this.handleChange})),r.a.createElement(Q,{validateStatus:this.state.content.validateStatus,help:this.state.content.errorMsg,className:"note-form-row"},r.a.createElement(V,{placeholder:"Enter your note",style:{fontSize:"16px"},autosize:{minRows:3,maxRows:6},name:"content",value:this.state.content.text,onChange:this.handleChange})),r.a.createElement(Q,{className:"note-form-row"},r.a.createElement(U.a,{type:"primary",htmlType:"submit",size:"large",disabled:this.isFormInvalid(),className:"create-note-form-button"},"Create Note")))))}}]),t}(n.Component);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ee=q.a.Item,te=W.a.TextArea,ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).validateTitle=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter a title for your note!"}:e.length>y?{validateStatus:"error",errorMsg:"Note title is too long (Maximum ".concat(y," characters allowed)")}:{validateStatus:"success",errorMsg:null}},a.validateContent=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please fill the body of your note!"}:e.length>O?{validateStatus:"error",errorMsg:"Note body is too long (Maximum ".concat(O," characters allowed)")}:{validateStatus:"success",errorMsg:null}},a.state={title:{text:""},content:{text:""}},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.isFormInvalid=a.isFormInvalid.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.location.state.noteId,P({url:f+"/notes/"+e,method:"GET"})).then(function(e){t.setState({title:{text:e.title,validateStatus:"success"},content:{text:e.content,validateStatus:"success"}})}).catch(function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create note."):l.a.error({message:"Journal App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return P({url:f+"/notes/"+e.id,method:"PUT",body:JSON.stringify(e)})}({id:this.props.location.state.noteId,title:this.state.title.text,content:this.state.content.text}).then(function(e){t.props.history.push("/")}).catch(function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create note."):l.a.error({message:"Journal App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleChange",value:function(e){var t=e.target.value;"title"===e.target.name?this.setState({title:Z({text:t},this.validateTitle(t))}):"content"===e.target.name&&this.setState({content:Z({text:t},this.validateContent(t))})}},{key:"isFormInvalid",value:function(){return"success"!==this.state.title.validateStatus||("success"!==this.state.content.validateStatus||void 0)}},{key:"render",value:function(){return r.a.createElement("div",{className:"new-note-container"},r.a.createElement("h1",{className:"page-title"},"Edit Note"),r.a.createElement("div",{className:"new-note-content"},r.a.createElement(q.a,{onSubmit:this.handleSubmit,className:"create-note-form"},r.a.createElement(ee,{validateStatus:this.state.title.validateStatus,help:this.state.title.errorMsg,className:"note-form-row"},r.a.createElement(W.a,{placeholder:"Note title ",size:"large",name:"title",value:this.state.title.text,onChange:this.handleChange})),r.a.createElement(ee,{validateStatus:this.state.content.validateStatus,help:this.state.content.errorMsg,className:"note-form-row"},r.a.createElement(te,{placeholder:"Enter your note",style:{fontSize:"16px"},autosize:{minRows:3,maxRows:6},name:"content",value:this.state.content.text,onChange:this.handleChange})),r.a.createElement(ee,{className:"note-form-row"},r.a.createElement(U.a,{type:"primary",htmlType:"submit",size:"large",disabled:this.isFormInvalid(),className:"create-note-form-button"},"Create Note")))))}}]),t}(n.Component),ne=(a(320),q.a.Item),re=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=q.a.create()(se);return r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",{className:"page-title"},"Login"),r.a.createElement("div",{className:"login-content"},r.a.createElement(e,{onLogin:this.props.onLogin})))}}]),t}(n.Component),se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){e||function(e){return P({url:f+"/auth/signin",method:"POST",body:JSON.stringify(e)})}(Object.assign({},a)).then(function(e){localStorage.setItem(b,e.accessToken),t.props.onLogin()}).catch(function(e){401===e.status?l.a.error({message:"Journal App",description:"Your Username or Password is incorrect. Please try again!"}):l.a.error({message:"Journal App",description:e.message||"Sorry! Something went wrong. Please try again!"})})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(q.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(ne,null,e("usernameOrEmail",{rules:[{required:!0,message:"Please input your username or email!"}]})(r.a.createElement(W.a,{prefix:r.a.createElement(I.a,{type:"user"}),size:"large",name:"usernameOrEmail",placeholder:"Username or Email"}))),r.a.createElement(ne,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(W.a,{prefix:r.a.createElement(I.a,{type:"lock"}),size:"large",name:"password",type:"password",placeholder:"Password"}))),r.a.createElement(ne,null,r.a.createElement(U.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button"},"Login"),"Or ",r.a.createElement(z.b,{to:"/signup"},"register now!")))}}]),t}(n.Component),oe=re;a(321);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ce=q.a.Item,ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).validateName=function(e){return e.length<S?{validateStatus:"error",errorMsg:"Name is too short (Minimum ".concat(S," characters needed.)")}:e.length>j?{validationStatus:"error",errorMsg:"Name is too long (Maximum ".concat(j," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.validateEmail=function(e){return e?RegExp("[^@ ]+@[^@ ]+\\.[^@ ]+").test(e)?e.length>k?{validateStatus:"error",errorMsg:"Email is too long (Maximum ".concat(k," characters allowed)")}:{validateStatus:null,errorMsg:null}:{validateStatus:"error",errorMsg:"Email not valid"}:{validateStatus:"error",errorMsg:"Email may not be empty"}},a.validateUsername=function(e){return e.length<N?{validateStatus:"error",errorMsg:"Username is too short (Minimum ".concat(N," characters needed.)")}:e.length>w?{validationStatus:"error",errorMsg:"Username is too long (Maximum ".concat(w," characters allowed.)")}:{validateStatus:null,errorMsg:null}},a.validatePassword=function(e){return e.length<C?{validateStatus:"error",errorMsg:"Password is too short (Minimum ".concat(C," characters needed.)")}:e.length>L?{validationStatus:"error",errorMsg:"Password is too long (Maximum ".concat(L," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.state={name:{value:""},username:{value:""},email:{value:""},password:{value:""}},a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.validateUsernameAvailability=a.validateUsernameAvailability.bind(Object(h.a)(a)),a.validateEmailAvailability=a.validateEmailAvailability.bind(Object(h.a)(a)),a.isFormInvalid=a.isFormInvalid.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(i.a)({},n,le({value:r},t(r))))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return P({url:f+"/auth/signup",method:"POST",body:JSON.stringify(e)})}({name:this.state.name.value,email:this.state.email.value,username:this.state.username.value,password:this.state.password.value}).then(function(e){l.a.success({message:"Journal App",description:"Thank you! You're successfully registered. Please Login to continue!"}),t.props.history.push("/login")}).catch(function(e){l.a.error({message:"Journal App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"isFormInvalid",value:function(){return!("success"===this.state.name.validateStatus&&"success"===this.state.username.validateStatus&&"success"===this.state.email.validateStatus&&"success"===this.state.password.validateStatus)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"signup-container"},r.a.createElement("h1",{className:"page-title"},"Sign Up"),r.a.createElement("div",{className:"signup-content"},r.a.createElement(q.a,{onSubmit:this.handleSubmit,className:"signup-form"},r.a.createElement(ce,{label:"Full Name",validateStatus:this.state.name.validateStatus,help:this.state.name.errorMsg},r.a.createElement(W.a,{size:"large",name:"name",autoComplete:"off",placeholder:"Your full name",value:this.state.name.value,onChange:function(t){return e.handleInputChange(t,e.validateName)}})),r.a.createElement(ce,{label:"Username",hasFeedback:!0,validateStatus:this.state.username.validateStatus,help:this.state.username.errorMsg},r.a.createElement(W.a,{size:"large",name:"username",autoComplete:"off",placeholder:"A unique username",value:this.state.username.value,onBlur:this.validateUsernameAvailability,onChange:function(t){return e.handleInputChange(t,e.validateUsername)}})),r.a.createElement(ce,{label:"Email",hasFeedback:!0,validateStatus:this.state.email.validateStatus,help:this.state.email.errorMsg},r.a.createElement(W.a,{size:"large",name:"email",type:"email",autoComplete:"off",placeholder:"Your email",value:this.state.email.value,onBlur:this.validateEmailAvailability,onChange:function(t){return e.handleInputChange(t,e.validateEmail)}})),r.a.createElement(ce,{label:"Password",validateStatus:this.state.password.validateStatus,help:this.state.password.errorMsg},r.a.createElement(W.a,{size:"large",name:"password",type:"password",autoComplete:"off",placeholder:"A password between 6 to 20 characters",value:this.state.password.value,onChange:function(t){return e.handleInputChange(t,e.validatePassword)}})),r.a.createElement(ce,null,r.a.createElement(U.a,{type:"primary",htmlType:"submit",size:"large",className:"signup-form-button",disabled:this.isFormInvalid()},"Sign up"),"Already registed? ",r.a.createElement(z.b,{to:"/login"},"Login now!")))))}},{key:"validateUsernameAvailability",value:function(){var e,t=this,a=this.state.username.value,n=this.validateUsername(a);"error"!==n.validateStatus?(this.setState({username:{value:a,validateStatus:"validating",errorMsg:null}}),(e=a,P({url:f+"/user/checkUsernameAvailability?username="+e,method:"GET"})).then(function(e){e.available?t.setState({username:{value:a,validateStatus:"success",errorMsg:null}}):t.setState({username:{value:a,validateStatus:"error",errorMsg:"This username is already taken"}})}).catch(function(e){t.setState({username:{value:a,validateStatus:"success",errorMsg:null}})})):this.setState({username:le({value:a},n)})}},{key:"validateEmailAvailability",value:function(){var e,t=this,a=this.state.email.value,n=this.validateEmail(a);"error"!==n.validateStatus?(this.setState({email:{value:a,validateStatus:"validating",errorMsg:null}}),(e=a,P({url:f+"/user/checkEmailAvailability?email="+e,method:"GET"})).then(function(e){e.available?t.setState({email:{value:a,validateStatus:"success",errorMsg:null}}):t.setState({email:{value:a,validateStatus:"error",errorMsg:"This Email is already registered"}})}).catch(function(e){t.setState({email:{value:a,validateStatus:"success",errorMsg:null}})})):this.setState({email:le({value:a},n)})}}]),t}(n.Component),me=(a(322),a(127)),de=(a(324),a(325),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-not-found"},r.a.createElement("h1",{className:"title"},"404"),r.a.createElement("div",{className:"desc"},"The Page you're looking for was not found."),r.a.createElement(z.b,{to:"/"},r.a.createElement(U.a,{className:"go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),t}(n.Component)),he=(a(326),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"server-error-page"},r.a.createElement("h1",{className:"server-error-title"},"500"),r.a.createElement("div",{className:"server-error-desc"},"Oops! Something went wrong at our Server. Why don't you go back?"),r.a.createElement(z.b,{to:"/"},r.a.createElement(U.a,{className:"server-error-go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),t}(n.Component)),pe=me.a.TabPane,ge=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={user:null,isLoading:!1},a.loadUserProfile=a.loadUserProfile.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loadUserProfile",value:function(e){var t=this;this.setState({isLoading:!0}),function(e){return P({url:f+"/users/"+e,method:"GET"})}(e).then(function(e){t.setState({user:e,isLoading:!1})}).catch(function(e){404===e.status?t.setState({notFound:!0,isLoading:!1}):t.setState({serverError:!0,isLoading:!1})})}},{key:"componentDidMount",value:function(){var e=this.props.match.params.username;this.loadUserProfile(e)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.username!==e.match.params.username&&this.loadUserProfile(e.match.params.username)}},{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement(_,null);if(this.state.notFound)return r.a.createElement(de,null);if(this.state.serverError)return r.a.createElement(he,null);return r.a.createElement("div",{className:"profile"},this.state.user?r.a.createElement("div",{className:"user-profile"},r.a.createElement("div",{className:"user-details"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement(x.a,{className:"user-avatar-circle",style:{backgroundColor:J(this.state.user.name)}},this.state.user.name[0].toUpperCase())),r.a.createElement("div",{className:"user-summary"},r.a.createElement("div",{className:"full-name"},this.state.user.name),r.a.createElement("div",{className:"username"},"@",this.state.user.username),r.a.createElement("div",{className:"user-joined"},"Joined ",function(e){var t=new Date(e),a=t.getMonth(),n=t.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+n}(this.state.user.joinedAt)))),r.a.createElement("div",{className:"user-note-details"},r.a.createElement(me.a,{defaultActiveKey:"1",animated:!1,tabBarStyle:{textAlign:"center"},size:"large",className:"profile-tabs"},r.a.createElement(pe,{tab:"".concat(this.state.user.noteCount," Notes"),key:"1"},r.a.createElement(G,{username:this.props.match.params.username,type:"USER_CREATED_NOTES"}))))):null)}}]),t}(n.Component),ve=(a(327),a(162)),fe=(a(342),a(39)),be=(a(331),a(159)),Ee=a.n(be),ye=g.a.Header,Oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleMenuClick=a.handleMenuClick.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleMenuClick",value:function(e){"logout"===e.key&&this.props.onLogout()}},{key:"render",value:function(){var e;return e=""!==this.props.currentUser.username?[r.a.createElement(fe.a.Item,{key:"/"},r.a.createElement(z.b,{to:"/"},r.a.createElement(I.a,{type:"home",className:"nav-icon"}))),r.a.createElement(fe.a.Item,{key:"/note/new"},r.a.createElement(z.b,{to:"/note/new"},r.a.createElement("img",{src:Ee.a,alt:"note",className:"note-icon"}))),r.a.createElement(fe.a.Item,{key:"/profile",className:"profile-menu"},r.a.createElement(Se,{currentUser:this.props.currentUser,handleMenuClick:this.handleMenuClick}))]:[r.a.createElement(fe.a.Item,{key:"/login"},r.a.createElement(z.b,{to:"/login"},"Login")),r.a.createElement(fe.a.Item,{key:"/signup"},r.a.createElement(z.b,{to:"/signup"},"Signup"))],r.a.createElement(ye,{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app-title"},r.a.createElement(z.b,{to:"/"},"Journal App")),r.a.createElement(fe.a,{className:"app-menu",mode:"horizontal",selectedKeys:[this.props.location.pathname],style:{lineHeight:"64px"}},e)))}}]),t}(n.Component);function Se(e){var t=r.a.createElement(fe.a,{onClick:e.handleMenuClick,className:"profile-dropdown-menu"},r.a.createElement(fe.a.Item,{key:"user-info",className:"dropdown-item",disabled:!0},r.a.createElement("div",{className:"user-full-name-info"},e.currentUser.name),r.a.createElement("div",{className:"username-info"},"@",e.currentUser.username)),r.a.createElement(fe.a.Divider,null),r.a.createElement(fe.a.Item,{key:"profile",className:"dropdown-item"},r.a.createElement(z.b,{to:"/users/profile"},"Profile")),r.a.createElement(fe.a.Item,{key:"logout",className:"dropdown-item"},"Logout"));return r.a.createElement(ve.a,{overlay:t,trigger:["click"],getPopupContainer:function(){return document.getElementsByClassName("profile-menu")[0]}},r.a.createElement("a",{className:"ant-dropdown-link"},r.a.createElement(I.a,{type:"user",className:"nav-icon",style:{marginRight:0}})," ",r.a.createElement(I.a,{type:"down"})))}var je=Object(v.g)(Oe),Ne=a(161),we=function(e){var t=e.component,a=e.authenticated,n=Object(Ne.a)(e,["component","authenticated"]);return r.a.createElement(v.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,Object.assign({},n,e)):r.a.createElement(v.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ke=g.a.Content,Ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={currentUser:{username:""},isAuthenticated:!1,isLoading:!1},a.handleLogout=a.handleLogout.bind(Object(h.a)(a)),a.loadCurrentUser=a.loadCurrentUser.bind(Object(h.a)(a)),a.handleLogin=a.handleLogin.bind(Object(h.a)(a)),l.a.config({placement:"topRight",top:70,duration:3}),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loadCurrentUser",value:function(){var e=this;this.setState({isLoading:!0}),(localStorage.getItem(b)?P({url:f+"/user/me",method:"GET"}):Promise.reject("No access token set.")).then(function(t){e.setState({currentUser:t,isAuthenticated:!0,isLoading:!1}),console.log(e.state.currentUser.username)}).catch(function(t){e.setState({isLoading:!1})})}},{key:"componentDidMount",value:function(){this.loadCurrentUser()}},{key:"handleLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You're successfully logged out.";localStorage.removeItem(b),this.setState(Object(i.a)({currentUser:null,isAuthenticated:!1},"currentUser",{username:""})),this.props.history.push(e),l.a[t]({message:"Journal App",description:a})}},{key:"handleLogin",value:function(){l.a.success({message:"Journal App",description:"You're successfully logged in."}),this.loadCurrentUser(),this.props.history.push("/")}},{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement(_,null):r.a.createElement(g.a,{className:"app-container"},r.a.createElement(je,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),r.a.createElement(ke,{className:"app-content"},r.a.createElement("div",{className:"container"},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(G,Object.assign({isAuthenticated:e.state.isAuthenticated,currentUser:e.state.currentUser,handleLogout:e.handleLogout,username:e.state.currentUser.username,type:"USER_CREATED_NOTES"},t))}}),r.a.createElement(v.b,{path:"/login",render:function(t){return r.a.createElement(oe,Object.assign({onLogin:e.handleLogin},t))}}),r.a.createElement(v.b,{path:"/signup",component:ue}),r.a.createElement(v.b,{path:"/users/:username",render:function(t){return r.a.createElement(ge,Object.assign({isAuthenticated:e.state.isAuthenticated,currentUser:e.state.currentUser},t))}}),r.a.createElement(we,{authenticated:this.state.isAuthenticated,path:"/note/new",component:$,handleLogout:this.handleLogout}),r.a.createElement(we,{authenticated:this.state.isAuthenticated,path:"/note/edit",component:ae,handleLogout:this.handleLogout}),r.a.createElement(v.b,{component:de})))))}}]),t}(n.Component),Le=Object(v.g)(Ce),Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Me(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(z.a,null,r.a.createElement(Le,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Pe?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Me(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Me(e)})}}()}},[[165,1,2]]]);
//# sourceMappingURL=main.97004fb4.chunk.js.map